<template>
    <tailwind-card class="py-6 flex flex-wrap" v-if="route">
        <div v-for="breadcrumb in route.meta.breadcrumbs" class="font-bold text-grey-dark">
            <span v-if="breadcrumb.link"><router-link :to="getLink(breadcrumb)">{{ __(breadcrumb.title, route.params) }} /</router-link></span>
            <span v-else>{{ __(breadcrumb.title, route.params) }} /</span>
        </div>
    </tailwind-card>
</template>

<script>
    export default {
        data() {
            return {
                route: null,
            }
        },
        methods: {
            getLink(breadcrumb) {
                let link = breadcrumb.link;
                if (link.substring(link.length - 1) !== "/") {
                    link = link + '/';
                }

                if (this.route.params) {
                    _.forEach(this.route.params, (param, index) => {
                        if (link.indexOf(':' + index + '/') > 0) {
                            link = _.replace(link, ':' + index, param);
                        }
                    });
                }
                if (link.substring(link.length - 1) !== "/") {
                    link = link.substring(0, link.length - 1);
                }
                return link;
            }
        },
        mounted() {
            this.route = this.$route;
        },
        created() {

        }
    }
</script>