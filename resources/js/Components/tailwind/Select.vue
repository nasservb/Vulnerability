<template>
    <div class="mx-2 mb-4">
        <label class="block text-grey-darker font-bold mb-2" :for="id" v-if="$slots.default">
            <slot></slot> <span v-if="required !== false" class="text-red">&#42;</span>
        </label>
        <select class="block appearance-none w-full bg-grey-lighter border border-grey-lighter text-grey-darker py-3 px-4 pr-8 rounded leading-tight focus:outline-none focus:bg-white focus:border-grey"
                :class="{'border-red' : errors[name]}"
                :id="id"
                :name="name"
                :value="value"
                :multiple="multiple"
                @input="input"
                @change="change">
            <option v-for="option in options" :value="option.id">{{ option.title }}</option>
        </select>
        <p class="text-red italic mt-2" v-for="error in errors[name]">{{ error }}</p>
        <slot name="info"></slot>
    </div>
</template>

<script>
    export default {
        props: {
            value: {
                default: function () {
                    return '';
                }
            },
            options: { required: true },
            name: { default: false},
            multiple: {default: false},
            id: {default: ''},
            errors: {
                type: Object,
                default: function () {
                    return {};
                }
            },
            required: { default: false },
        },

        methods: {
            input($event) {
                this.$emit('input', $event.target.value);
            },

            change($event) {
                this.$emit('change', $event.target.value);
            }
        },
    }
</script>