<template>
    <div class="mx-2 mb-4">
        <label class="block text-grey-darker font-bold mb-2" :for="id" v-if="$slots.default">
            <slot></slot> <span v-if="required" class="text-red">&#42;</span>
        </label>
        <input class="shadow appearance-none border rounded w-full py-2 px-3 text-grey-darker mb-3 leading-tight"
               :class="[focusClass]"
               :id="id"
               type="search"
               :name="name"
               :placeholder="placeholder"
               :value="value"
               @input="input"
               @change="change"
               :required="required"
               :maxlength="max"
        >
        <p class="text-red italic mt-2" v-for="error in errors[name]">{{ error }}</p>
        <slot name="info"></slot>
    </div>
</template>

<script>
    export default {
        props: {
            placeholder: {default: null},
            id: {default: null},
            name: {default: null},
            errors: {
                type: Object,
                default: () => {
                    return {};
                }
            },
            value: {required: true},
            required: { default: false },
            max: { default: -1 },
        },

        methods: {
            input($event) {
                this.$emit('input', $event.target.value);
            },

            change($event) {
                this.$emit('change', $event.target.value);
            }
        },
        computed: {
            focusClass() {
                if (this.required) {
                    return 'focus:bg-orange-lightest';
                }

                return 'focus:bg-grey-lighter';
            },
        }
    }
</script>