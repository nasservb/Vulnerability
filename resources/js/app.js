require('./bootstrap');

import Vue from 'vue';
import {__, route} from './laravelify'
import router from "./router";
import {} from "./components";

import Index from './Pages/Vulnerability/Index.vue';

window.route = function (key, params = false) {
    let route = _.find(window.routes, function (r) {
        return r.name === key;
    });

    if (!_.isObjectLike(route)) {
        flash('Route ' + key + ' not found', 'danger');
        return key;
    }

    route = '/' + route.uri;
    if (params) {
        _.forEach(params, (param, index) => {
            route = _.replace(route, '{' + index + '}', param);
        });
    }
    return route;
};

window.__ = function (key, params = false) {
    let trans = _.get(window.trans, key, key);

    if (params) {
        _.forEach(params, (param, index) => {
            trans = _.replace(trans, ':' + index, param);
        });
    }
    return trans;
};

Vue.prototype.route = (key, params = false) => {
    return route(key, params);
};

Vue.prototype.__ = (key, params = false) => {
    return __(key, params);
};
const app = new Vue({
    el: '#app',
    components: { Index, router },
    created (){
        console.log('I am created');
    },
    render:h=>h(Index)
});

window.route = route;
window.__ = __;

